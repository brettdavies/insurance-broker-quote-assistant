# Story 1.2: Integrated Home Screen with Dual Workflow Interface

## Status
Ready to Implement

## Story
**As a** broker,  
**I want** a single home screen where I can immediately start conversational intake or upload a policy without extra navigation,  
**so that** I can maximize efficiency during client interactions by eliminating unnecessary clicks.

## Acceptance Criteria

1. React 18.2 app renders at `localhost:3000` with Tailwind CSS styling, dark mode as default, and professional financial services aesthetic
2. Home screen displays integrated interface with two sections: (1) chat panel for conversational intake on left/center, (2) policy upload drop zone on right/sidebar
3. Chat interface is immediately usable - broker can start typing without clicking "Start" button
4. Policy upload panel accepts drag-and-drop PDF or manual data entry without navigation
5. Slash command shortcuts for rapid data entry: field shortcuts like `/k` (kids), `/v` (vehicles), `/n` (name); action shortcuts like `/export`, `/copy`, `/reset`; mode switching with `/policy` and `/intake`; help with `/help` or `/?`
6. Field-specific shortcuts open focused modals: `/k` → modal "How many kids?" → type number → Enter → injects `k:5` into chat
7. See [keyboard-shortcuts-reference.md](../keyboard-shortcuts-reference.md) for complete list of 27 field + 6 action shortcuts
8. TanStack Router configured with single route `/` (no separate intake/analysis routes)
9. Desktop-only responsive design tested at 1024px window width
10. shadcn/ui components integrated with dark mode theming
11. **Dark mode enabled as default theme** with light mode toggle
12. Keyboard shortcuts browser accessible via `/help` or `/?` for discoverability

## Tasks / Subtasks

- [ ] **Task 1: Initialize React Application with Bun** (AC: 1)
  - [ ] Navigate to `apps/web` directory
  - [ ] Create `src/main.tsx` entry point with React 18.2 imports
  - [ ] Create `src/App.tsx` root component
  - [ ] Create `index.html` with root div and script tag for main.tsx
  - [ ] Configure Bun dev server: `bun --hot run src/main.tsx` (React Fast Refresh enabled)
  - [ ] **CRITICAL**: Do NOT wrap App in `<React.StrictMode>` (see Dev Notes for rationale)
  - [ ] Verify app renders at `localhost:3000` with "Hello World" placeholder

- [ ] **Task 2: Setup Tailwind CSS with Dark Mode Configuration** (AC: 1, 11)
  - [ ] Install Tailwind CSS ^3.4 as dependency in `apps/web`
  - [ ] Create `tailwind.config.js` with dark mode class strategy: `darkMode: 'class'`
  - [ ] Create `src/index.css` with Tailwind directives and custom CSS variables for dark theme colors
  - [ ] Configure Tailwind content paths: `['./src/**/*.{ts,tsx}']`
  - [ ] Import `index.css` in `main.tsx`
  - [ ] Add `dark` class to `<html>` element by default
  - [ ] Verify dark mode styling renders correctly

- [ ] **Task 3: Install and Configure shadcn/ui** (AC: 10)
  - [ ] Install shadcn/ui CLI dependencies: `@radix-ui/*`, `class-variance-authority`, `clsx`, `tailwind-merge`
  - [ ] Create `components/ui/` directory for shadcn components
  - [ ] Add Button component via shadcn CLI or copy-paste
  - [ ] Add Input component
  - [ ] Add Card component
  - [ ] Add Dialog component (for slash command modals)
  - [ ] Add Toast component (for error notifications)
  - [ ] Create `lib/utils.ts` with `cn()` helper function for class merging
  - [ ] Verify dark mode theming applies to all shadcn components

- [ ] **Task 4: Setup TanStack Router with Single Route** (AC: 8)
  - [ ] Install `@tanstack/react-router` ^1.0 in `apps/web`
  - [ ] Create `src/routes/` directory
  - [ ] Create `src/routes/__root.tsx` root route component
  - [ ] Create `src/routes/index.tsx` for home screen route (`/`)
  - [ ] Configure router in `App.tsx` with route tree
  - [ ] Verify navigation works and route renders at `localhost:3000/`
  - [ ] Test that no separate `/intake` or `/policy` routes exist (single-route design)

- [ ] **Task 5: Create Dual Interface Layout** (AC: 2)
  - [ ] Create `src/components/layout/HomeScreen.tsx` component
  - [ ] Implement two-column layout using Tailwind grid: left/center (60-70% width) for chat, right (30-40% width) for policy upload sidebar
  - [ ] Left section: Chat panel container with placeholder "Type to start conversation..."
  - [ ] Right section: Policy upload drop zone with drag-and-drop area
  - [ ] Apply professional financial services aesthetic: dark blues, clean typography, subtle gradients
  - [ ] Verify layout renders correctly at 1024px window width (desktop-only design)

- [ ] **Task 6: Build Chat Interface Component** (AC: 3)
  - [ ] Create `src/components/intake/ChatPanel.tsx` component
  - [ ] Add textarea input with autofocus (broker can start typing immediately)
  - [ ] Style with monospace font for data fields and key-value syntax
  - [ ] Add placeholder text: "Type to start conversation, or use /help for shortcuts..."
  - [ ] Implement controlled input with `useState` for message value
  - [ ] Add form submit handler (POST to `/api/intake/message` - stubbed for this story)
  - [ ] Display conversation history placeholder area (messages will be populated in Story 1.4)
  - [ ] Verify broker can type without clicking "Start" button

- [ ] **Task 7: Build Policy Upload Component** (AC: 4)
  - [ ] Create `src/components/policy/UploadPanel.tsx` component
  - [ ] Implement drag-and-drop zone using shadcn Card component
  - [ ] Add file input with `accept="application/pdf,.pdf,.docx,.txt"` attribute
  - [ ] Validate file type (PDF, DOCX, TXT only) and size (5MB max) on client side
  - [ ] Display file name and size after upload
  - [ ] Add "Clear" button to remove uploaded file
  - [ ] Add manual data entry textarea as alternative to file upload
  - [ ] Show error toast if invalid file type or size exceeded (using shadcn Toast)

- [ ] **Task 8: Implement Slash Command System Foundation** (AC: 5, 6, 7, 12)
  - [ ] Create `src/hooks/useSlashCommands.ts` custom hook for global slash command detection
  - [ ] Implement document-level event listener for `/` keypress (no modifiers)
  - [ ] Track command mode state: active for 2 seconds after `/` pressed
  - [ ] Show visual indicator `"/..."` when command mode active
  - [ ] Create command mapping for 27 field shortcuts (see keyboard-shortcuts-reference.md)
  - [ ] Create command mapping for 6 action shortcuts (`/export`, `/copy`, `/reset`, `/policy`, `/intake`, `/help`)
  - [ ] Implement smart detection: ignore `/` in dates (e.g., `1/5/2025`) and URLs (e.g., `http://`)
  - [ ] Add `Escape` key handler to cancel command mode
  - [ ] Log detected command to console (modal implementation in future stories)

- [ ] **Task 9: Create Field Shortcut Modals (Sample Implementation)** (AC: 6)
  - [ ] Create `src/components/shortcuts/FieldModal.tsx` reusable modal component
  - [ ] Implement `/k` (kids) modal: number input with validation (min: 0)
  - [ ] Implement `/v` (vehicles) modal: number input with validation (min: 1)
  - [ ] Implement `/n` (name) modal: first + last name fields
  - [ ] On submit: inject formatted key-value pill into chat (e.g., `k:5`)
  - [ ] On cancel (Escape): close modal without injection
  - [ ] Verify autofocus on modal input field when opened
  - [ ] Test keyboard navigation: Tab between fields, Enter to submit, Escape to cancel
  - [ ] **Note**: Full 27 field implementation deferred to Story 1.4

- [ ] **Task 10: Create Help Modal for Keyboard Shortcuts** (AC: 12)
  - [ ] Create `src/components/shortcuts/HelpModal.tsx` component
  - [ ] Display all 27 field shortcuts in categorized table (Identity, Location, Product, Household, Vehicle, Property, Coverage)
  - [ ] Display all 6 action shortcuts in separate section
  - [ ] Add search input to filter shortcuts by field name or letter
  - [ ] Show keyboard shortcut in tooltip format: "Add kids (/k)"
  - [ ] Trigger help modal via `/help` or `/?` slash commands
  - [ ] Close modal on Escape or click outside
  - [ ] Reference keyboard-shortcuts-reference.md for complete shortcut list

- [ ] **Task 11: Add Dark/Light Mode Toggle** (AC: 11)
  - [ ] Create `src/components/layout/ThemeToggle.tsx` component
  - [ ] Implement toggle button using shadcn Button with moon/sun icons
  - [ ] Store theme preference in localStorage: `theme: 'dark' | 'light'`
  - [ ] Toggle `dark` class on `<html>` element when theme changes
  - [ ] Default to dark mode on initial load
  - [ ] Position toggle in top-right corner of header
  - [ ] Verify Tailwind dark mode classes apply correctly when toggled

- [ ] **Task 12: Style with Financial Services Aesthetic** (AC: 1)
  - [ ] Define custom Tailwind color palette in `tailwind.config.js`: dark blues (#1E3A8A, #3B82F6), grays (#1F2937, #374151), accents (#10B981 for success, #EF4444 for error)
  - [ ] Apply professional typography: Inter or Roboto font family, clear hierarchy (h1: 2xl, h2: xl, body: base)
  - [ ] Add subtle gradients to header and panels for visual interest
  - [ ] Style input fields with focus states and dark mode variants
  - [ ] Ensure high contrast for accessibility (WCAG AA minimum)
  - [ ] Test visual consistency across light and dark modes

- [ ] **Task 13: Setup TanStack Query for API Integration (Preparation)** (AC: N/A - infrastructure for future stories)
  - [ ] Install `@tanstack/react-query` ^5.0 in `apps/web`
  - [ ] Install `@tanstack/react-query-devtools` ^5.0 as dev dependency
  - [ ] Create `src/lib/query-client.ts` with QueryClient configuration
  - [ ] Wrap App with `<QueryClientProvider>` in `main.tsx`
  - [ ] Add React Query DevTools component for debugging (see CLAUDE.md for setup)
  - [ ] Configure default query options: `staleTime: 5000`, `retry: 1`
  - [ ] Verify DevTools panel appears in bottom-right corner

- [ ] **Task 14: Create Hono RPC API Client (Preparation)** (AC: N/A - infrastructure for future stories)
  - [ ] Create `src/lib/api-client.ts` for Hono RPC client
  - [ ] Import `hono/client` and create type-safe client: `hc<AppType>('http://localhost:7070')`
  - [ ] Export `api` client for use in TanStack Query mutations/queries
  - [ ] Add placeholder comment: "AppType will be imported from @repo/api after Story 1.3"
  - [ ] **Note**: Full API integration happens in Story 1.4-1.5

- [ ] **Task 15: Validation and Testing**
  - [ ] Verify all 12 acceptance criteria are met
  - [ ] Test slash command system: `/k`, `/v`, `/n` open modals correctly
  - [ ] Test `/help` opens keyboard shortcuts browser
  - [ ] Test dark/light mode toggle switches themes correctly
  - [ ] Test chat interface autofocus and typing
  - [ ] Test policy upload accepts PDF/DOCX/TXT and rejects invalid files
  - [ ] Test responsive design at 1024px window width
  - [ ] Create smoke test: render Home Screen and verify no console errors
  - [ ] Update story status to "Review" for QA validation

## Dev Notes

### Previous Story Insights
**From Story 1.1:**
- Monorepo structure established with `apps/web`, `apps/api`, `packages/shared` workspaces
- Bun workspaces configured for dependency management
- TypeScript strict mode enabled across all packages
- Hybrid linting/formatting: Biome 1.9 (linting + formatting for most files) + Prettier 3.0 with prettier-plugin-tailwindcss (React component formatting only)
- Path aliases configured: `@repo/shared` for shared package, `@/` for relative imports
- Development command: `bun run dev` starts both frontend (port 3000) and backend (port 7070) concurrently

### React Configuration (Critical)

**No StrictMode for This Demo** [Source: architecture/3-tech-stack.md#32-critical-configuration]
```typescript
// ❌ DON'T wrap app in StrictMode for this demo
// Reason: StrictMode double-renders components to catch side effects,
// but this increases LLM API costs during development (2x API calls).
// For a 5-day demo with limited budget, disable to reduce costs.
ReactDOM.createRoot(document.getElementById('root')!).render(
  <App />  // No <React.StrictMode> wrapper
)
```

**Frontend Build with Bun** [Source: architecture/3-tech-stack.md#32-critical-configuration]
- Dev server: `bun --hot run apps/web` (defaults to `localhost:3000`)
- React Fast Refresh: Built-in HMR with instant updates
- Build output: `dist/` (via `bun build` if needed)
- No configuration file needed: Zero-config setup for React + TypeScript

### Component Architecture

**Feature-Based Organization** [Source: architecture/10-frontend-architecture.md#101-component-architecture]
```
apps/web/src/
├── components/
│   ├── layout/          # HomeScreen, ThemeToggle, Header
│   ├── intake/          # ChatPanel, MessageList (Story 1.4)
│   ├── policy/          # UploadPanel, PolicySummary (Story 1.4)
│   ├── shortcuts/       # FieldModal, HelpModal, CommandIndicator
│   └── ui/              # shadcn components (Button, Input, Card, Dialog, Toast)
├── routes/
│   ├── __root.tsx       # Root route with QueryClientProvider
│   └── index.tsx        # Home screen route (/)
├── hooks/
│   └── useSlashCommands.ts  # Global slash command detection
├── lib/
│   ├── api-client.ts    # Hono RPC client
│   ├── query-client.ts  # TanStack Query configuration
│   └── utils.ts         # cn() helper, date formatting
├── main.tsx             # Entry point
├── App.tsx              # Root component with router
└── index.css            # Tailwind directives + custom CSS variables
```

**Why Feature Folders** [Source: architecture/10-frontend-architecture.md#101-component-architecture]
- Easier to find related code: `components/intake/ChatPanel.tsx` vs `components/forms/ChatPanel.tsx`
- Colocation: Keep related components together (IntakeForm + MissingFieldsAlert in same intake/ folder)
- Scales better: As features grow, folder structure mirrors product domains

### Tailwind CSS & Dark Mode

**Dark Mode Configuration** [Source: architecture/3-tech-stack.md#31-technology-stack-table]
```javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class', // Enable dark mode via .dark class on <html>
  content: ['./src/**/*.{ts,tsx}'],
  theme: {
    extend: {
      colors: {
        // Professional financial services palette
        primary: {
          50: '#EFF6FF',   // Lightest blue
          900: '#1E3A8A',  // Darkest blue
        },
        // Add custom dark mode colors
      },
    },
  },
}
```

**Custom CSS Variables for Dark Theme** [Source: architecture/10-frontend-architecture.md#101-component-architecture]
```css
/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    /* ... light mode variables */
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    /* ... dark mode variables */
  }
}
```

**Why Class Strategy** [Source: architecture/3-tech-stack.md]
- Client-side control: JavaScript can toggle `dark` class on `<html>` element
- Persistent preference: Store in localStorage and apply on page load
- No flash of unstyled content: Apply dark class immediately in HTML

### shadcn/ui Integration

**Installation Approach** [Source: architecture/10-frontend-architecture.md#101-component-architecture]
- **Copy-paste components**, not NPM dependency
- Built on Radix UI primitives for accessibility
- Fully customizable: Components live in `components/ui/` and can be modified

**Critical shadcn Components for This Story**
- **Button**: Primary, secondary, ghost variants with dark mode styles
- **Input**: Text input with focus states and validation
- **Card**: Container for policy upload panel
- **Dialog**: Modal component for slash command field inputs
- **Toast**: Notifications for errors (invalid file upload)

**ESLint Rule** [Source: architecture/10-frontend-architecture.md#101-component-architecture]
- Block direct Radix imports: ensures consistent styling via shadcn
- All Radix components must be imported from `components/ui/`

### TanStack Router Setup

**Single Route Design** [Source: architecture/10-frontend-architecture.md#103-routing]
```
Routes:
- / - Home screen with dual workflow interface (chat + upload)

NO separate /intake or /policy routes - all functionality on single screen
```

**Why Single Route** [Source: Epic 1.2 AC]
- Broker efficiency: No navigation required, immediate access to both workflows
- Simpler routing: No need for breadcrumbs or back navigation
- Flat structure: Easier to test and maintain

**Router Configuration Pattern** [Source: architecture/10-frontend-architecture.md#103-routing]
```typescript
// src/routes/__root.tsx
import { createRootRoute, Outlet } from '@tanstack/react-router'
import { QueryClientProvider } from '@tanstack/react-query'
import { queryClient } from '@/lib/query-client'

export const Route = createRootRoute({
  component: () => (
    <QueryClientProvider client={queryClient}>
      <Outlet /> {/* Renders child routes */}
    </QueryClientProvider>
  )
})

// src/routes/index.tsx
import { createRoute } from '@tanstack/react-router'
import { Route as rootRoute } from './__root'
import { HomeScreen } from '@/components/layout/HomeScreen'

export const Route = createRoute({
  getParentRoute: () => rootRoute,
  path: '/',
  component: HomeScreen
})
```

### Keyboard Shortcuts Implementation

**Slash Command System Design** [Source: docs/keyboard-shortcuts-reference.md]

**27 Field Shortcuts** (Single-letter slash commands):
- Identity & Contact: `/n` (name), `/e` (email), `/p` (phone)
- Location: `/s` (state), `/z` (zip code)
- Product: `/l` (product line)
- Household: `/a` (age), `/h` (household size), `/k` (kids), `/d` (dependents)
- Vehicle: `/v` (vehicles), `/g` (garage type), `/i` (VINs), `/r` (drivers/carrier), `/c` (driving records), `/u` (clean record)
- Property: `/o` (owns home), `/t` (property type), `/y` (construction year), `/f` (roof type), `/q` (square feet)
- Coverage: `/m` (current premium), `/b` (deductibles), `/x` (coverage limits), `/w` (existing policies)

**6 Action Shortcuts** (Full-word slash commands):
- `/export` - Export to IQuote Pro
- `/copy` - Copy to clipboard
- `/reset` - Reset session
- `/policy` - Switch to policy mode
- `/intake` - Switch to intake mode
- `/help` or `/?` - Show keyboard shortcuts browser

**Implementation Pattern** [Source: docs/keyboard-shortcuts-reference.md]
```typescript
// src/hooks/useSlashCommands.ts
export function useSlashCommands() {
  useEffect(() => {
    let commandMode = false
    let commandBuffer = ''
    let commandTimeout: NodeJS.Timeout | null = null

    const handleKeyDown = (e: KeyboardEvent) => {
      // Enter command mode on / (no modifiers)
      if (e.key === '/' && !hasModifiers(e)) {
        const target = e.target as HTMLElement
        const isNotesInput = target.dataset.notesInput === 'true'
        const isOtherInput = ['INPUT', 'TEXTAREA'].includes(target.tagName)

        if (!isNotesInput && isOtherInput) return // Don't trigger in modal inputs

        e.preventDefault()
        enterCommandMode()
        return
      }

      // In command mode, next keystroke adds to buffer
      if (commandMode && /^[a-z]$/i.test(e.key)) {
        e.preventDefault()
        commandBuffer += e.key.toLowerCase()

        // Check single-letter field shortcuts (execute immediately)
        if (commandBuffer.length === 1 && FIELD_SHORTCUTS[commandBuffer]) {
          executeCommand(FIELD_SHORTCUTS[commandBuffer])
          exitCommandMode()
          return
        }

        // Check full-word action shortcuts
        if (ACTION_SHORTCUTS[commandBuffer]) {
          executeAction(ACTION_SHORTCUTS[commandBuffer])
          exitCommandMode()
          return
        }

        // Update visual indicator
        showCommandIndicator(`/${commandBuffer}`)
      }

      // Cancel on Escape
      if (commandMode && e.key === 'Escape') {
        exitCommandMode()
      }
    }

    document.addEventListener('keydown', handleKeyDown)
    return () => document.removeEventListener('keydown', handleKeyDown)
  }, [])
}
```

**Smart Detection Logic** [Source: docs/keyboard-shortcuts-reference.md]
- **Dates ignored**: `1/5/2025` does not trigger (digits before slash)
- **URLs ignored**: `http://example.com` does not trigger (letters before slash)
- **Escape sequence**: Type `//` to insert literal `/` without triggering modal
- **Modal inputs disabled**: Slash commands disabled in modal text fields (except notes input)

**Modal Behavior** [Source: docs/keyboard-shortcuts-reference.md]
1. Focus: Cursor automatically focuses in modal input field
2. Validation: Real-time validation with error messages
3. Submit: `Enter` key submits, `Escape` cancels
4. Injection: On submit, formatted value injected as pill into notes (e.g., `k:5`)
5. Keyboard navigation: `Tab` moves between fields in multi-field modals

### TanStack Query Configuration

**Query Client Setup** [Source: architecture/10-frontend-architecture.md#104-api-integration]
```typescript
// src/lib/query-client.ts
import { QueryClient } from '@tanstack/react-query'

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5000,  // Consider data fresh for 5 seconds
      retry: 1,         // Retry failed queries once
    },
  },
})
```

**React Query DevTools** [Source: CLAUDE.md - TanStack Query DevTools]
```typescript
// apps/web/src/main.tsx
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      {/* Your app components */}
      <ReactQueryDevtools
        initialIsOpen={false}
        buttonPosition="bottom-right"
        position="bottom"
      />
    </QueryClientProvider>
  )
}
```

**Why DevTools** [Source: CLAUDE.md]
- Real-time visualization of queries, mutations, cache state, network activity
- Debugging tool for development only (automatically excluded from production builds)
- Pairs with Chrome DevTools MCP for AI-driven troubleshooting

### Hono RPC Client (Type-Safe API Integration)

**Client Setup Pattern** [Source: architecture/10-frontend-architecture.md#104-api-integration]
```typescript
// src/lib/api-client.ts
import { hc } from 'hono/client'
import type { AppType } from '@repo/api' // Will be available after Story 1.3

export const api = hc<AppType>('http://localhost:7070')

// Usage with TanStack Query - full type inference + response parsing
const { mutate } = useMutation({
  mutationFn: async (data) => {
    const res = await api.api.intake.$post({ json: data })
    return res.json()  // REQUIRED: Parse response body to extract typed data
  }
})
```

**Critical: Response Parsing** [Source: architecture/10-frontend-architecture.md#104-api-integration]
- Hono RPC returns `Response` objects
- **Always call `.json()`** to extract typed data
- Type inference works automatically via Hono AppType import

**Why Hono RPC** [Source: architecture/10-frontend-architecture.md#104-api-integration]
- Zero-boilerplate type safety: Frontend imports backend's `AppType`, instant type inference
- No manual type sync: Types update automatically when backend changes
- Better than OpenAPI: For 5-day timeline, OpenAPI codegen is overkill

### UI/UX Specifications

**Professional Financial Services Aesthetic** [Source: Epic 1.2 AC 1]
- **Color Palette**: Dark blues (#1E3A8A, #3B82F6), grays (#1F2937, #374151), accents (#10B981 success, #EF4444 error)
- **Typography**: Inter or Roboto font family, clear hierarchy (h1: 2xl, h2: xl, body: base)
- **Gradients**: Subtle gradients on header and panels for visual interest
- **Contrast**: WCAG AA minimum for accessibility (4.5:1 for normal text, 3:1 for large text)

**Dual Interface Layout** [Source: Epic 1.2 AC 2]
- **Left/Center Panel** (60-70% width): Chat interface for conversational intake
- **Right Sidebar** (30-40% width): Policy upload drop zone
- **Responsive**: Desktop-only design, tested at 1024px minimum window width

**Chat Interface Styling** [Source: Epic 1.2 AC 3]
- **Monospace font** for data fields and key-value syntax highlighting
- **Autofocus** on textarea input (broker can start typing immediately)
- **Placeholder text**: "Type to start conversation, or use /help for shortcuts..."
- **Visual distinction**: Broker vs AI messages (Story 1.4 will implement message bubbles)

**Policy Upload Panel** [Source: Epic 1.2 AC 4]
- **Drag-and-drop zone**: Visual feedback on hover (border color change, background highlight)
- **File type indicator**: Show accepted formats (PDF, DOCX, TXT)
- **File size limit**: 5MB max, client-side validation before upload
- **Error handling**: Toast notification for invalid file type or size exceeded

**Dark Mode Default** [Source: Epic 1.2 AC 11]
- Dark mode enabled as default theme
- Light mode toggle available in top-right corner (moon/sun icon)
- Theme preference stored in localStorage
- Tailwind dark mode classes apply to all components

### Testing

**Testing Strategy for This Story** [Source: architecture/16-testing-strategy.md]
- **Component Tests (40% focus)**: React components, hooks, utilities
- **Integration Tests (20% focus)**: TanStack Router, slash command system, modal flows
- **E2E Tests (0% for MVP)**: Too slow for 5-day timeline

**Key Test Scenarios**
- Verify React app renders at `localhost:3000` without errors
- Verify dark mode is enabled by default on initial load
- Verify slash command `/k` opens kids modal and injects `k:5` pill on submit
- Verify `/help` opens keyboard shortcuts browser
- Verify policy upload accepts PDF/DOCX/TXT and rejects other file types
- Verify responsive design at 1024px window width

**Testing Tools** [Source: architecture/16-testing-strategy.md#162-testing-tools]
- Bun test: Built-in test runner (Jest-compatible API)
- @testing-library/react: User-centric component testing
- Test file location: `src/components/**/*.test.tsx` (collocated with components)

### File Naming Conventions

**Component Files** [Source: architecture/17-coding-standards.md#172-naming-conventions]
- Components: PascalCase (e.g., `HomeScreen.tsx`, `ChatPanel.tsx`)
- Hooks: camelCase with 'use' prefix (e.g., `useSlashCommands.ts`)
- Utils: kebab-case (e.g., `api-client.ts`, `query-client.ts`)
- Constants: UPPER_SNAKE_CASE (e.g., `FIELD_SHORTCUTS`, `ACTION_SHORTCUTS`)

### Critical Architectural Rules

**Type Sharing** [Source: architecture/17-coding-standards.md#171-critical-architectural-rules]
- Always import shared types from `@repo/shared`
- Never duplicate type definitions between frontend and backend
- **Why**: Single source of truth prevents type drift

**API Calls** [Source: architecture/17-coding-standards.md#171-critical-architectural-rules]
- Never make direct `fetch()` calls in components
- Always use Hono RPC client with TanStack Query hooks
- **Why**: Hono RPC provides automatic type inference, TanStack Query handles caching/errors

**Imports** [Source: architecture/17-coding-standards.md#171-critical-architectural-rules]
- Use `@repo/shared` for shared package imports
- Use `@/` for relative imports within app (configured in tsconfig.json)
- Never use `../../../` relative paths
- **Why**: Monorepo path aliases prevent broken imports when moving files

### Project Structure Alignment

**Verified Against Section 12: Unified Project Structure** [Source: architecture/12-unified-project-structure.md]
- All React components in `apps/web/src/components/`
- Feature-based organization: `layout/`, `intake/`, `policy/`, `shortcuts/`, `ui/`
- TanStack Router routes in `apps/web/src/routes/`
- Utilities in `apps/web/src/lib/`
- Entry point: `apps/web/src/main.tsx`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-09 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
TBD - Populated during implementation

### Debug Log References
TBD - Populated during implementation

### Completion Notes
TBD - Populated during implementation

### File List
TBD - Populated during implementation

## QA Results
TBD - Populated after QA review
